<?xml version="1.0"?>
<odoo>
    <record id="view_partner_state_form" model="ir.ui.view">
        <field name="name">partner_state_partner_form_view</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <form>
                <field name="partner_state_enable" invisible="1"/>
            </form>
            <sheet position="before">
                <header attrs="{'invisible':[('supplier','!=',True)]}">
                    <button name="partner_state_pending"
                            attrs="{'invisible':['|',('supplier','!=',True),('partner_state','not in',['potential'])]}"
                            string="Request Approval" type="object" class="oe_highlight"/>
                    <button name="partner_state_approved"
                            attrs="{'invisible':['|',('supplier','!=',True),('partner_state','not in',['pending'])]}"
                            string="Approve" type="object" class="oe_highlight"
                            groups="qms_partner_state.approve_partners"/>
                    <button name="partner_state_rejected"
                            attrs="{'invisible':['|',('supplier','!=',True),('partner_state','not in',['pending'])]}"
                            string="Reject" type="object"/>
                    <button name="partner_state_potential"
                            attrs="{'invisible':['|',('supplier','!=',True),('partner_state','not in',['approved','pending','rejected'])]}"
                            string="To Potential" type="object"/>
                    <field name="partner_state" widget="statusbar"
                           attrs="{'invisible':[('supplier','!=',True)]}"/>
                </header>
            </sheet>
        </field>
    </record>
    
    <record id="view_res_partner_state_tree" model="ir.ui.view">
        <field name="name">partner.state.partner.tree.view</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <tree>
                <field name="partner_state"/>
            </tree>
        </field>
    </record>
    
    <record id="view_partner_state_search" model="ir.ui.view">
        <field name="name">partner.state.partner.search.view</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter"/>
        <field name="arch" type="xml">
            <filter name="supplier" position="after">
                <separator/>
                <filter string="Potential" name="potential" domain="[('partner_state','=','potential')]"/>
                <filter string="Pending" name="pending" domain="[('partner_state','=','pending')]" />
                <filter string="Approved" name="approved" domain="[('partner_state','=','approved')]" />
                <filter string="Approved" name="approved" domain="[('partner_state','=','approved')]" />
                <filter string="Status" domain="[]" name="status"
                            context="{'group_by':'partner_state'}"/>
            </filter>
        </field>
    </record>

    <record id="base.action_partner_supplier_form" model="ir.actions.act_window">
        <field name="name">Vendors</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="domain">[]</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'search_default_approved': 1,'search_default_supplier': 1,'default_customer': 0,'default_supplier': 1, 'default_company_type': 'company'}</field>
        <field name="filter" eval="True"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a contact in your address book.
          </p><p>
            Odoo helps you easily track all activities related to
            a supplier: discussions, history of purchases,
            documents, etc.
          </p>
        </field>
    </record>

    <menuitem id="menu_vendor_approval" name="Vendor Approval"
            parent="purchase.menu_purchase_root"
            sequence="2"/>

    <record id="action_supplier_form_potential" model="ir.actions.act_window">
        <field name="name">Potential</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_type">form</field>
        <field name="domain">[('partner_state', '=', 'potential'), ('supplier', '=', 1)]</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_customer': 0,'default_supplier': 1, 'default_company_type': 'company'}</field>
        <field name="filter" eval="True"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a contact in your address book.
          </p><p>
            Odoo helps you easily track all activities related to
            a supplier: discussions, history of purchases,
            documents, etc.
          </p>
        </field>
    </record>
    <record id="action_vendor_kanban_view_potential" model="ir.actions.act_window.view">
        <field eval="1" name="sequence"/>
        <field name="view_mode">kanban</field>
        <field name="view_id" ref="base.res_partner_kanban_view"/>
        <field name="act_window_id" ref="action_supplier_form_potential"/>
    </record>
    <record id="action_vendor_tree_view_potential" model="ir.actions.act_window.view">
        <field eval="2" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="base.view_partner_tree"/>
        <field name="act_window_id" ref="action_supplier_form_potential"/>
    </record>
    <record id="action_vendor_form_view_potential" model="ir.actions.act_window.view">
        <field eval="3" name="sequence"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="base.view_partner_form"/>
        <field name="act_window_id" ref="action_supplier_form_potential"/>
    </record>

    <menuitem id="menu_vendor_approval_potential" parent="menu_vendor_approval"
              action="action_supplier_form_potential" sequence="1"/>

    <record id="action_supplier_form_pending" model="ir.actions.act_window">
        <field name="name">Pending</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="domain">[('partner_state', '=', 'pending'), ('supplier', '=', 1)]</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_customer': 0,'default_supplier': 1, 'default_company_type': 'company'}</field>
        <field name="filter" eval="True"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a contact in your address book.
          </p><p>
            Odoo helps you easily track all activities related to
            a supplier: discussions, history of purchases,
            documents, etc.
          </p>
        </field>
    </record>
    <record id="action_vendor_kanban_view_pending" model="ir.actions.act_window.view">
        <field eval="1" name="sequence"/>
        <field name="view_mode">kanban</field>
        <field name="view_id" ref="base.res_partner_kanban_view"/>
        <field name="act_window_id" ref="action_supplier_form_pending"/>
    </record>
    <record id="action_vendor_tree_view_pending" model="ir.actions.act_window.view">
        <field eval="2" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="base.view_partner_tree"/>
        <field name="act_window_id" ref="action_supplier_form_pending"/>
    </record>
    <record id="action_vendor_form_view_pending" model="ir.actions.act_window.view">
        <field eval="3" name="sequence"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="base.view_partner_form"/>
        <field name="act_window_id" ref="action_supplier_form_pending"/>
    </record>

    <menuitem id="menu_vendor_approval_pending" parent="menu_vendor_approval"
              action="action_supplier_form_pending" sequence="1"/>

    <record id="action_supplier_form_approved" model="ir.actions.act_window">
        <field name="name">Approved</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_type">form</field>
        <field name="domain">[('partner_state', '=', 'approved'), ('supplier', '=', 1)]</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_customer': 0,'default_supplier': 1, 'default_company_type': 'company'}</field>
        <field name="filter" eval="True"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a contact in your address book.
          </p><p>
            Odoo helps you easily track all activities related to
            a supplier: discussions, history of purchases,
            documents, etc.
          </p>
        </field>
    </record>
    <record id="action_vendor_kanban_view_approved" model="ir.actions.act_window.view">
        <field eval="1" name="sequence"/>
        <field name="view_mode">kanban</field>
        <field name="view_id" ref="base.res_partner_kanban_view"/>
        <field name="act_window_id" ref="action_supplier_form_approved"/>
    </record>
    <record id="action_vendor_tree_view_approved" model="ir.actions.act_window.view">
        <field eval="2" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="base.view_partner_tree"/>
        <field name="act_window_id" ref="action_supplier_form_approved"/>
    </record>
    <record id="action_vendor_form_view_approved" model="ir.actions.act_window.view">
        <field eval="3" name="sequence"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="base.view_partner_form"/>
        <field name="act_window_id" ref="action_supplier_form_approved"/>
    </record>

    <menuitem id="menu_vendor_approval_approved" parent="menu_vendor_approval"
              action="action_supplier_form_approved" sequence="1"/>

    <menuitem id="purchase.menu_procurement_management_supplier_name" name="Vendors"
            parent="purchase.menu_procurement_management"
            action="base.action_partner_supplier_form" sequence="15"/>

    <record model="ir.ui.menu" id="purchase.menu_procurement_management_supplier_name">
        <field name="action" eval="False"/>
    </record>

    <record id="action_supplier_form_rejected" model="ir.actions.act_window">
        <field name="name">Rejected</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="domain">[('partner_state', '=', 'rejected'), ('supplier', '=', 1)]</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_customer': 0,'default_supplier': 1, 'default_company_type': 'company'}</field>
        <field name="filter" eval="True"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a contact in your address book.
          </p><p>
            Odoo helps you easily track all activities related to
            a supplier: discussions, history of purchases,
            documents, etc.
          </p>
        </field>
    </record>
    <record id="action_vendor_kanban_view_rejected" model="ir.actions.act_window.view">
        <field eval="1" name="sequence"/>
        <field name="view_mode">kanban</field>
        <field name="view_id" ref="base.res_partner_kanban_view"/>
        <field name="act_window_id" ref="action_supplier_form_rejected"/>
    </record>
    <record id="action_vendor_tree_view_rejected" model="ir.actions.act_window.view">
        <field eval="2" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="base.view_partner_tree"/>
        <field name="act_window_id" ref="action_supplier_form_rejected"/>
    </record>
    <record id="action_vendor_form_view_rejected" model="ir.actions.act_window.view">
        <field eval="3" name="sequence"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="base.view_partner_form"/>
        <field name="act_window_id" ref="action_supplier_form_rejected"/>
    </record>

    <menuitem id="menu_vendor_approval_rejected" parent="menu_vendor_approval"
              action="action_supplier_form_rejected" sequence="1"/>

</odoo>
