<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="inherit_res_partner_tree" model="ir.ui.view">
            <field name="name">res.partner.tree</field>
            <field name="model">res.partner</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="base.view_partner_tree"/>
            <field name="arch" type="xml">
                <data>
                    <tree>
<!--                    <field name="name"/>-->
                    <field name="email" position="after">
                        <field name="user_id"/>
<!--                        <field name="segment_id"/>-->
                        <!--<field name="related_brand"/>-->
                        <!--<field name="related_division" string="Division"/>-->
                    </field>
                    </tree>
                </data>
            </field>
        </record>



        <record id="inherit_res_partner_form" model="ir.ui.view">
            <field name="name">res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div" position="inside">
                    <button  type="object"  class="oe_stat_button" name="childs_contact"
                             context="{'search_default_parent_id':active_ids,}" icon="fa-book">
                        <field name="contact_count" string="Contacts" widget="statinfo"/>
                    </button>
                </xpath>
                <xpath expr="//field[@name='vat']" position="after">
                    <field name="user_id"/>
<!--                    <field name="new_division_ids" invisible="1" />-->
                        <field name="division_ids"  attrs="{'invisible': [('company_type','in', ('company'))]}"
                               options="{'no_create': True, 'no_open': True}" widget="many2one_tags"/>
<!--                    <field name="new_brand_ids" invisible="1" />-->
                        <field name="brand_ids"  attrs="{'invisible': [('company_type','in', ('company'))]}"
                               options="{'no_create': True, 'no_open': True}" widget="many2many_tags"/>

                </xpath>
                <xpath expr="//field[@name='email']" position="after">
                    <field name="fax_no"/>
                </xpath>
                <field name="vat" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
                <xpath expr="//sheet/div[2]/div/field[@name='parent_id']" position="attributes">
                    <attribute name="attrs">{'invisible': [('is_company', '=', True)]}</attribute>
                </xpath>
                <xpath expr="//page/group/group[1]/field[@name='user_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <field name="company_type" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>

                <field name="email" position="attributes">
                    <attribute name="attrs">{'required': [('company_type', '!=', 'company')]}</attribute>
                </field>
                <field name="phone" position="attributes">
                    <attribute name="attrs">{'required': [('company_type', '=', 'company')]}</attribute>
                </field>
                <field name="mobile" position="attributes">
                    <attribute name="attrs">{'required': [('company_type', '=', 'person')]}</attribute>
                </field>
                <field name="state_id" position="attributes">
                    <attribute name="required">1</attribute>
                    <attribute name="options">{'no_create': True, 'no_open': True}</attribute>
                </field>



<!--                <field name="parent_id" position="attributes">-->
<!--                    <attribute name="attrs">{'readonly': [('partner_state','in', ('approved'))]}</attribute>-->
<!--                </field>-->


<!--                -->

                <xpath expr="//field[@name='child_ids']/form/sheet/group/group/field[@name='email']" position="after">
                        <field name="new_division_ids" invisible="1" />
                        <field name="new_brand_ids" invisible="1" />
                        <field name="division_ids" options="{'no_create': True, 'no_open': True}" widget="many2many_tags"/>
                        <field name="brand_ids" domain="[('id', 'in', new_brand_ids)]"  widget="many2many_tags" options="{'no_create': True, 'no_open': True}"/>
                        <!--<field name="collect_brand_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True}"/>-->
                    </xpath>

                <xpath expr="//field[@name='child_ids']/form/sheet/group/group/field[@name='mobile']" position="attributes">
                        <attribute name="attrs">{'required': [('type', '=', 'contact')]}</attribute>
                    </xpath>
                <xpath expr="//field[@name='child_ids']/form/sheet/group/group/field[@name='email']" position="attributes">
                    <attribute name="attrs">{'required': [('type', '=', 'contact')]}</attribute>
                </xpath>

                <xpath expr="//field[@name='child_ids']/form/sheet/group/group/field[@name='name']" position='attributes'>
                        <attribute name="attrs">{'invisible': [('type', 'in', ('invoice','delivery'))], 'required': [('type', 'in', ('contact','other'))]}</attribute>

                    </xpath>
                <xpath expr="//field[@name='child_ids']/form/sheet/group/group/field[@name='name']" position='after'>
                    <field name="name" string="Location Name" attrs="{'invisible': [('type', 'in', ('other','private','contact'))], 'required': [('type', 'in', ('invoice','delivery'))]}"/>
                </xpath>

                <xpath expr="//field[@name='child_ids']/form/sheet/group/group/field[@name='name']" position="before">
<!--                    <field name="gstin" attrs="{'invisible': [('type', '!=', 'invoice')],'required': [('type', '=', 'invoice')]}"/>-->
                </xpath>


            </field>
        </record>



<!--        <<<<TREE VIEW FOR INDIVIDUAL CONTACT><>>>>>>/TREE>-->

            <record id="tree_view_for_individual_contact" model="ir.ui.view">
            <field name="name">res.partner.tree</field>
            <field name="model">res.partner</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="parent_id"/>
                    <field name="email"/>
                    <field name="phone"/>
                    <field name="mobile"/>
                    <field name="user_id"/>
<!--                    <field name="related_brand"/>-->
<!--                    <field name="related_division" string="Division"/>-->
                </tree>
            </field>
        </record>

        <record id="action_company_contacts" model="ir.actions.act_window">
        <field name="name">Contacts</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
<!--        <field name="view_type">form</field>-->
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{'default_company_type':'company','default_customer':False,
            'default_is_company':True}</field>
        <field name="domain">[('is_company','=',True)]</field>
        <field name="view_id" ref="base.view_res_partner_filter"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a contact in your contacts directory.
          </p><p>
            Odoo helps you easily track all activities related to
            a customer: discussions, history of business opportunities,
            documents, etc.
          </p>
        </field>
        </record>


        <record id="view_partner_property_form" model="ir.ui.view">
            <field name="name">res.partner.carrier.property.form.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form" />
            <field name="arch" type="xml">
                <xpath expr="//page[@name='sales_purchases']//field[@name='user_id']" position="before">
                    <field name="customer"/>
                    <field name="user_id" invisible="1"/>
                </xpath>
                <xpath expr="//page[@name='sales_purchases']//field[@name='property_supplier_payment_term_id']" position="before">
                    <field name="supplier"/>
                </xpath>


            </field>
        </record>


        <record id="inherit_view_partner_property_form" model="ir.ui.view">
            <field name="name">res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account.view_partner_property_form"/>
            <field name="arch" type="xml">
                <xpath expr="//notebook/page[@name='accounting']" position="after">
                    <page string="Divisions" name="division" attrs="{'invisible': [('is_company', '!=', True)]}">
                    <!--<page string="Divisions" name="division" >-->
                        <field name="new_division_ids" >
                            <tree delete="false" editable="bottom">
                                   <field name="name" required="1"/>
                                   <field name="brands_line"/>
                            </tree>
                        </field>
                        <!--<field name="new_division_ids" attrs="{'invisible': [('is_company', '!=', True)]}"/>-->
                    </page>
                </xpath>
            </field>
        </record>


        <record id="base.action_partner_category_form" model="ir.actions.act_window">
            <field name="name">Contact Tags</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.category</field>
<!--            <field name="view_type">form</field>-->
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a new partner tag.
                </p>
                <p>
                    Manage partner tags to better classify them for tracking and analysis purposes.
                    A partner may have several categories and categories have a hierarchical structure: a partner with a category has also the parent category.
                </p>
            </field>
        </record>


        <record id="base.view_partner_category_form" model="ir.ui.view">
            <field name="name">Contact Tags</field>
            <field name="model">res.partner.category</field>
            <field name="arch" type="xml">
                <form string="Contact Tag">
                    <group col="4">
                        <field name="name"/>
                        <field name="active"/>
                        <field name="parent_id" invisible="1"/>
                    </group>
                </form>
            </field>
        </record>


<!--        <MENU FOR INDIVIDUAL CONTACT></MENU>-->

        <record id="action_for_individual_contact" model="ir.actions.act_window">
            <field name="name">Contact</field>
            <field name="res_model">res.partner</field>
<!--             <field name="domain">[('is_company', '=', False)]</field>-->
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="tree_view_for_individual_contact"/>
            <field name="search_view_id" ref="base.view_res_partner_filter"/>
            <field name="context">{"search_default_related_division": 1, 'default_customer': False}</field>
        </record>

        <record id="tree_individual_contact" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="tree_view_for_individual_contact"/>
            <field name="act_window_id" ref="action_for_individual_contact"/>
        </record>

        <record id="form_individual_contact" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="inherit_res_partner_form"/>
            <field name="act_window_id" ref="action_for_individual_contact"/>
        </record>
    </data>

</odoo>
